{% extends 'mainapp/base.html' %}

{% block content %}

<!-- cards section -->
<section class="flex flex-col pt-20 lg:flex-row">
    <!-- card Patient -->
    <article class="bg-white border border-gray-300 rounded shadow-md p-4 lg:w-1/4 mx-5 mt-4 sm:h-fit order-last lg:order-first">
        <!-- Patient title -->
        <h1 class="text-2xl font-bold">
            Mon patient
        </h1>
        <!-- Red line -->
        <div class="mt-1 mb-2 border-b-4 border-red-500 rounded w-3/4"></div>
        <!-- Patient answer -->
        {% if previous_answers %}
            {% for answer in previous_answers %}
                <li class="list-inside text-red-500">
                    <span class="text-black">
                        {{ answer }}
                    </span>	
                </li>
            {% endfor %}
        {% endif %}
    </article>

    <!-- card Questions -->
    <article class="flex flex-col justify-between bg-white border border-gray-300 rounded text-center shadow-md p-4 lg:w-3/4 mx-5 lg:mx-10 sm:mt-4 lg:mt-32 h-96">
            <div>
                <!-- Question title -->
                <h1 class="font-bold text-2xl sm:text-2xl lg:text-3xl pt-4 p-4" id="question_title">
                    {{ question.title }}
                </h1>
                <!-- blue line -->
                <div class="mx-auto mt-1 mb-2 border-b-4 border-blue-200 rounded w-1/3"></div>
            </div>
            <!-- Form -->
            <div>
            {% if question.response_type == 'boolean' %}
                <!-- Checkbox -->
                <form class="font-bold text-2xl" method="POST">
                    {% csrf_token %}
                    {{ form_bool.as_p }}
                </form>
            {% else %}
                <!-- Text -->
                <form class="text-center" method="POST">
                    {% csrf_token %}
                    {{ form_int.as_p }}
                    <!-- Valider -->
                    <div class="p-4">
                        <button class="btn btn-primary bg-red-500 hover:bg-red-600 text-white text-xl font-bold py-3 px-5 lg:px-7 rounded-full shadow-md my-2 transform transition-transform hover:-translate-y-1" value="Valider">
                            Valider
                        </button>
                    </div>
                </form>
            {% endif %}
            <div>
            <!-- button section -->
            <div class="flex justify-between mx-2">
                <!-- Précédent -->
                <button class="btn btn-primary btn-sm bg-red-500 hover:bg-red-600 text-white text-xl font-bold py-3 px-5 lg:px-7 rounded-full shadow-md my-2 lg:mr-4 transform transition-transform hover:-translate-y-1" id="back-btn" {% if question.order <= 1 %}hidden{% endif %}">
                    Précédent
                </button>
                <!-- Suivant -->
                <button class="btn btn-primary btn-sm bg-red-500 hover:bg-red-600 text-white text-xl font-bold py-3 px-5 lg:px-7 rounded-full shadow-md my-2 lg:mr-4 transform transition-transform hover:-translate-y-1" id="pass-btn" data-question-order="{{ question.order }}">
                    Suivant
                </button>
            </div>
    </article>
</section>

<div class="flex justify-center">
    <button class="btn btn-primary btn-sm bg-red-500 hover:bg-red-600 text-white text-xl font-bold py-3 px-5 lg:px-7 rounded-full shadow-md my-2 lg:mr-4 transform transition-transform hover:-translate-y-1">
        <a href="/synthese/">
            Synthèse
        </a>
    </button>
</div>

{% endblock content %}
